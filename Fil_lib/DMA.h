    /*!
    *   --------------------------------------------------------------------------
    *                       ///DMA initialization\\\
    *   --------------------------------------------------------------------------
    *   @author RCR group developers - Caska, Evgeny Garanin
    *   @date 14/07/2022 - last update version DMA
    *
    *       @note [FIL:DMA] Configuration file DMA
    */
#pragma once
#include "FilConfig.h"

#if (configUSE_DMA == 1)

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/*---------------------------------------------------------------------------------------- STM32F410xx--------------------------------------------------------------------------------------------------------------------------------------------*/
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                    //////////////////////////                                                                                          //////////////////////////
                                    ///DMA1 request mapping///                                                                                          ///DMA2 request mapping///
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//            | Stream 0    | Stream 1  | Stream 2    | Stream 3    | Stream 4    | Stream 5    | Stream 6  | Stream 7 |////            | Stream 0    | Stream 1  | Stream 2    | Stream 3    | Stream 4    | Stream 5    | Stream 6  | Stream 7 |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//// -----------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//  Channel 0 | SPI3_RX     |     -     | SPI3_RX     | SPI2_RX     | SPI2_TX     | SPI3_TX     |     -     | SPI3_TX  |////  Channel 0 | ADC1        |           | TIM8_CH1    |             | ADC1        |             | TIM1_CH1  |          |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////            |             |     -     | TIM8_CH2    |      -      |             |      -      | TIM1_CH2  |    -     |//
//  Channel 1 | I2C1_RX     |     -     | TIM7_UP     |     -       | TIM7_UP     | I2C1_RX     | I2C1_TX   | I2C1_TX  |////            |             |           | TIM8_CH3    |             |             |             | TIM1_CH3  |          |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//  Channel 2 | TIM4_CH1    |     -     | I2S3_EXT_RX | TIM4_CH2    | I2S3_EXT_TX | I2S3_EXT_TX | TIM4_UP   | TIM4_CH3 |////  Channel 1 |      -      | DCMI      | ADC2        | ADC2        |      -      |      -      |     -     | DCMI     |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//  Channel 3 | I2S3_EXT_RX | TIM2_UP   | I2C3_RX     | I2S2_EXT_RX | I2C3_TX     | TIM2_CH1    | TIM2_CH2  | TIM2_UP  |////  Channel 2 | ADC3        | ADC3      |      -      |      -      |      -      | CRYP_OUT    | CRYP_IN   | HASH_IN  |//
//            |             | TIM2_CH3  |             |             |             |             | TIM2_CH4  | TIM2_CH4 |////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////  Channel 3 | SPI1_RX     |     -     | SPI1_RX     | SPI1_TX     |      -      | SPI1_TX     |     -     |    -     |//
//  Channel 4 | UART5_RX    | USART3_RX | UART4_RX    | USART3_TX   | UART4_TX    | USART2_RX   | USART2_TX | UART5_TX |////            |             |           |             |             |             |             |           |          |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//  Channel 5 |      -      |     -     | TIM3_CH4    |     -       | TIM3_CH1    | TIM3_CH2    |     -     | TIM3_CH3 |////  Channel 4 |      -      |     -     | USART1_RX   | SDIO        |      -      | USART1_RX   | SDIO      | USART1_TX|//
//            |             |           | TIM3_UP     |             | TIM3_TRIG   |             |           |          |////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////  Channel 5 |      -      | USART6_RX | USART6_RX   |     -       |      -      |      -      | USART6_TX | USART6_TX|//
//  Channel 6 | TIM5_CH3    | TIM5_CH4  | TIM5_CH1    | TIM5_CH4    | TIM5_CH2    |     -       | TIM5_UP   |    -     |////            |             |           |             |             |             |             |           |          |//
//            | TIM5_UP     | TIM5_TRIG |             | TIM5_TRIG   |             |             |           |          |////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////  Channel 6 | TIM1_TRIG   | TIM1_CH1  | TIM1_CH2    | TIM1_CH1    | TIM1_CH4    | TIM1_UP     | TIM1_CH3  |          |//
//  Channel 7 |      -      | TIM6_UP   | I2C2_RX     | I2C2_RX     | USART3_TX   | DAC1        | DAC2      | I2C2_TX  |////            |             |           |             |             | TIM1_TRIG   |             |           |    -     |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////            |             |           |             |             | TIM1_COM    |             |           |          |//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////            |             |           |             |             |             |             |           |          |//
                                                                                                                          //------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
                                                                                                                          //  Channel 7 |             | TIM8_UP   | TIM8_CH1    | TIM8_CH2    | TIM8_CH3    |             |           | TIM8_CH4 |//
                                                                                                                          //            |      -      |           |             |             |             |      -      |     -     | TIM8_TRIG|//
                                                                                                                          //            |             |           |             |             |             |             |           | TIM8_COM |//
                                                                                                                          //------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
                                                                                                                          //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/*---------------------------------------------------------------------------------------- STM32F401xx--------------------------------------------------------------------------------------------------------------------------------------------*/
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                    //////////////////////////                                                                                          //////////////////////////
                                    ///DMA1 request mapping///                                                                                          ///DMA2 request mapping///
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//            | Stream 0    | Stream 1  | Stream 2    | Stream 3    | Stream 4    | Stream 5    | Stream 6  | Stream 7 |////            | Stream 0    | Stream 1  | Stream 2    | Stream 3    | Stream 4    | Stream 5    | Stream 6  | Stream 7 |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//// -----------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//  Channel 0 | SPI3_RX     |     -     | SPI3_RX     | SPI2_RX     | SPI2_TX     | SPI3_TX     |     -     | SPI3_TX  |////  Channel 0 | ADC1        |           |             |             | ADC1        |             | TIM1_CH1  |          |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////            |             |     -     |      -      |      -      |             |      -      | TIM1_CH2  |    -     |//
//  Channel 1 | I2C1_RX     | I2C3_RX   |      -      |     -       |     -       | I2C1_RX     | I2C1_TX   | I2C1_TX  |////            |             |           |             |             |             |             | TIM1_CH3  |          |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//  Channel 2 | TIM4_CH1    |     -     | I2S3_EXT_RX | TIM4_CH2    | I2S3_EXT_TX | I2S3_EXT_TX | TIM4_UP   | TIM4_CH3 |////  Channel 1 |      -      |     -     |      -      |      -      |      -      |      -      |     -     |    -     |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//  Channel 3 | I2S3_EXT_RX | TIM2_UP   | I2C3_RX     | I2S2_EXT_RX | I2C3_TX     | TIM2_CH1    | TIM2_CH2  | TIM2_UP  |////  Channel 2 |      -      |     -     |      -      |      -      |      -      |      -      |     -     |    -     |//
//            |             | TIM2_CH3  |             |             |             |             | TIM2_CH4  | TIM2_CH4 |////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////  Channel 3 | SPI1_RX     |     -     | SPI1_RX     | SPI1_TX     |      -      | SPI1_TX     |     -     |    -     |//
//  Channel 4 |      -      |     -     |      -      |     -       |     -       | USART2_RX   | USART2_TX |    -     |////            |             |           |             |             |             |             |           |          |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//  Channel 5 |      -      |     -     | TIM3_CH4    |     -       | TIM3_CH1    | TIM3_CH2    |     -     | TIM3_CH3 |////  Channel 4 | SPI4_RX     | SPI4_TX   | USART1_RX   | SDIO        |      -      | USART1_RX   | SDIO      | USART1_TX|//
//            |             |           | TIM3_UP     |             | TIM3_TRIG   |             |           |          |////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////  Channel 5 |      -      | USART6_RX | USART6_RX   | SPI4_RX     | SPI4_TX     |      -      | USART6_TX | USART6_TX|//
//  Channel 6 | TIM5_CH3    | TIM5_CH4  | TIM5_CH1    | TIM5_CH4    | TIM5_CH2    |  I2C3_TX    | TIM5_UP   |    -     |////            |             |           |             |             |             |             |           |          |//
//            | TIM5_UP     | TIM5_TRIG |             | TIM5_TRIG   |             |             |           |          |////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////  Channel 6 | TIM1_TRIG   | TIM1_CH1  | TIM1_CH2    | TIM1_CH1    | TIM1_CH4    | TIM1_UP     | TIM1_CH3  |          |//
//  Channel 7 |      -      |     -     | I2C2_RX     | I2C2_RX     |     -       |     -       |    -      | I2C2_TX  |////            |             |           |             |             | TIM1_TRIG   |             |           |    -     |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////            |             |           |             |             | TIM1_COM    |             |           |          |//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////            |             |           |             |             |             |             |           |          |//
                                                                                                                          //------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
                                                                                                                          //  Channel 7 |             |     -     |      -      |     -       |     -       |             |           |          |//
                                                                                                                          //            |      -      |           |             |             |             |      -      |     -     |    -     |//
                                                                                                                          //            |             |           |             |             |             |             |           |          |//
                                                                                                                          //------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
                                                                                                                          //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/*---------------------------------------------------------------------------------------- STM32F10xx--------------------------------------------------------------------------------------------------------------------------------------------*/
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                    //////////////////////////                                                                                          //////////////////////////
                                    ///DMA1 request mapping///                                                                                          ///DMA2 request mapping///
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//            | Stream 0    | Stream 1  | Stream 2    | Stream 3    | Stream 4    | Stream 5    | Stream 6  | Stream 7 |////            | Stream 0    | Stream 1  | Stream 2    | Stream 3    | Stream 4    | Stream 5    | Stream 6  | Stream 7 |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//// -----------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//  Channel 0 | SPI3_RX     |     -     | SPI3_RX     | SPI2_RX     | SPI2_TX     | SPI3_TX     |     -     | SPI3_TX  |////  Channel 0 | ADC1        |           |             |             | ADC1        |             | TIM1_CH1  |          |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////            |             |     -     |      -      |      -      |             |      -      | TIM1_CH2  |    -     |//
//  Channel 1 | I2C1_RX     | I2C3_RX   |      -      |     -       |     -       | I2C1_RX     | I2C1_TX   | I2C1_TX  |////            |             |           |             |             |             |             | TIM1_CH3  |          |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//  Channel 2 | TIM4_CH1    |     -     | I2S3_EXT_RX | TIM4_CH2    | I2S3_EXT_TX | I2S3_EXT_TX | TIM4_UP   | TIM4_CH3 |////  Channel 1 |      -      |     -     |      -      |      -      |      -      |      -      |     -     |    -     |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//  Channel 3 | I2S3_EXT_RX | TIM2_UP   | I2C3_RX     | I2S2_EXT_RX | I2C3_TX     | TIM2_CH1    | TIM2_CH2  | TIM2_UP  |////  Channel 2 |      -      |     -     |      -      |      -      |      -      |      -      |     -     |    -     |//
//            |             | TIM2_CH3  |             |             |             |             | TIM2_CH4  | TIM2_CH4 |////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////  Channel 3 | SPI1_RX     |     -     | SPI1_RX     | SPI1_TX     |      -      | SPI1_TX     |     -     |    -     |//
//  Channel 4 |      -      |     -     |      -      |     -       |     -       | USART2_RX   | USART2_TX |    -     |////            |             |           |             |             |             |             |           |          |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//  Channel 5 |      -      |     -     | TIM3_CH4    |     -       | TIM3_CH1    | TIM3_CH2    |     -     | TIM3_CH3 |////  Channel 4 | SPI4_RX     | SPI4_TX   | USART1_RX   | SDIO        |      -      | USART1_RX   | SDIO      | USART1_TX|//
//            |             |           | TIM3_UP     |             | TIM3_TRIG   |             |           |          |////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////  Channel 5 |      -      | USART6_RX | USART6_RX   | SPI4_RX     | SPI4_TX     |      -      | USART6_TX | USART6_TX|//
//  Channel 6 | TIM5_CH3    | TIM5_CH4  | TIM5_CH1    | TIM5_CH4    | TIM5_CH2    |  I2C3_TX    | TIM5_UP   |    -     |////            |             |           |             |             |             |             |           |          |//
//            | TIM5_UP     | TIM5_TRIG |             | TIM5_TRIG   |             |             |           |          |////------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////  Channel 6 | TIM1_TRIG   | TIM1_CH1  | TIM1_CH2    | TIM1_CH1    | TIM1_CH4    | TIM1_UP     | TIM1_CH3  |          |//
//  Channel 7 |      -      |     -     | I2C2_RX     | I2C2_RX     |     -       |     -       |    -      | I2C2_TX  |////            |             |           |             |             | TIM1_TRIG   |             |           |    -     |//
//------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|////            |             |           |             |             | TIM1_COM    |             |           |          |//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////            |             |           |             |             |             |             |           |          |//
                                                                                                                          //------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
                                                                                                                          //  Channel 7 |             |     -     |      -      |     -       |     -       |             |           |          |//
                                                                                                                          //            |      -      |           |             |             |             |      -      |     -     |    -     |//
                                                                                                                          //            |             |           |             |             |             |             |           |          |//
                                                                                                                          //------------|-------------|-----------|-------------|-------------|-------------|-------------|-----------|----------|//
                                                                                                                          //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//----------------------------------------DMA Priority----------------------------------------------------//
    #define LOW_P       0x00
    #define MEDIUM_P    0x01
    #define HIGH_P      0x10
    #define VeryHigh_P  0x11
//--------------------------------------------------------------------------------------------------------//
#if defined(STM32F40_41xxx)

        /*!
        *   @brief DMAConnectTOADC1(NumbData,PRIORITY, MEMORY, TXINTERRUPT) -> Connect DMA to ADC1
        *       @arg PRIORITY - Priority of target channel
        *       @arg MEMORY - Buffer address for storing values
        *       @arg TXINTERRUPT - Interrupt selection mode: 0.5 - half transferred interrupt
        *                                                    1 - transferred complete interrupt
        *                                                    2 - transferred error interrupt
        *       @version STM32F40_41xxx
        */
    #define DMAConnectTOADC1(PRIORITY, MEMORY, TXINTERRUPT)                    {\
                    DMA2_Stream0->CR |= (0 << 25);                              \
                    DMA2_Stream0->PAR |= ((uint32_t)&ADC1->DR);                 \
                    DMA2_Stream0->M0AR |= ((uint32_t)&MEMORY);                  \
                    DMA2_Stream0->CR &= ~DMA_SxCR_DIR;                          \
                    DMA2_Stream0->NDTR = ADC1_NUMB;                             \
                    DMA2_Stream0->CR &= ~DMA_SxCR_PINC;                         \
                    DMA2_Stream0->CR |= DMA_SxCR_MINC|DMA_SxCR_CIRC;            \
                    DMA2_Stream0->CR |= DMA_SxCR_PSIZE_0;                       \
                    DMA2_Stream0->CR |= DMA_SxCR_MSIZE_0;                       \
                    DMA2_Stream0->CR |= PRIORITY;                               \
                    if(TXINTERRUPT == 1)   DMA2_Stream0->CR |= DMA_SxCR_TCIE;   \
                    if(TXINTERRUPT == 0.5) DMA2_Stream0->CR |= DMA_SxCR_HTIE;   \
                    if(TXINTERRUPT == 2)   DMA2_Stream0->CR |= DMA_SxCR_TEIE;   \
                    DMA2_Stream0->CR |= DMA_SxCR_EN;                            }

        /*!
        *   @brief DMAConnectTOADC2(NumbData,PRIORITY, MEMORY, TXINTERRUPT) -> Connect DMA to ADC2
        *       @arg PRIORITY - Priority of target channel
        *       @arg MEMORY - Buffer address for storing values
        *       @arg TXINTERRUPT - Interrupt selection mode: 0.5 - half transferred interrupt
        *                                                    1 - transferred complete interrupt
        *                                                    2 - transferred error interrupt
        *       @version STM32F40_41xxx
        */
    #define DMAConnectTOADC2(PRIORITY, MEMORY, TXINTERRUPT)                    {\
                    DMA2_Stream2->CR |= (1 << 25);                              \
                    DMA2_Stream2->PAR |= ((uint32_t)&ADC2->DR);                 \
                    DMA2_Stream2->M0AR |= ((uint32_t)&MEMORY);                  \
                    DMA2_Stream2->CR &= ~DMA_SxCR_DIR;                          \
                    DMA2_Stream2->NDTR = ADC2_NUMB;                             \
                    DMA2_Stream2->CR &= ~DMA_SxCR_PINC;                         \
                    DMA2_Stream2->CR |= DMA_SxCR_MINC|DMA_SxCR_CIRC;            \
                    DMA2_Stream2->CR |= DMA_SxCR_PSIZE_0;                       \
                    DMA2_Stream2->CR |= DMA_SxCR_MSIZE_0;                       \
                    DMA2_Stream2->CR |= PRIORITY;                               \
                    if(TXINTERRUPT == 1)   DMA2_Stream2->CR |= DMA_SxCR_TCIE;   \
                    if(TXINTERRUPT == 0.5) DMA2_Stream2->CR |= DMA_SxCR_HTIE;   \
                    if(TXINTERRUPT == 2)   DMA2_Stream2->CR |= DMA_SxCR_TEIE;   \
                    DMA2_Stream2->CR |= DMA_SxCR_EN;                            }

        /*!
        *   @brief DMAConnectTOADC3(NumbData,PRIORITY, MEMORY, TXINTERRUPT) -> Connect DMA to ADC3
        *       @arg PRIORITY - Priority of target channel
        *       @arg MEMORY - Buffer address for storing values
        *       @arg TXINTERRUPT - Interrupt selection mode: 0.5 - half transferred interrupt
        *                                                    1 - transferred complete interrupt
        *                                                    2 - transferred error interrupt
        *       @version STM32F40_41xxx
        */
    #define DMAConnectTOADC3(PRIORITY, MEMORY, TXINTERRUPT)                    {\
                    DMA2_Stream1->CR |= (2 << 25);                              \
                    DMA2_Stream1->PAR |= ((uint32_t)&ADC3->DR);                 \
                    DMA2_Stream1->M0AR |= ((uint32_t)&MEMORY);                  \
                    DMA2_Stream1->CR &= ~DMA_SxCR_DIR;                          \
                    DMA2_Stream1->NDTR = ADC3_NUMB;                             \
                    DMA2_Stream1->CR &= ~DMA_SxCR_PINC;                         \
                    DMA2_Stream1->CR |= DMA_SxCR_MINC|DMA_SxCR_CIRC;            \
                    DMA2_Stream1->CR |= DMA_SxCR_PSIZE_0;                       \
                    DMA2_Stream1->CR |= DMA_SxCR_MSIZE_0;                       \
                    DMA2_Stream1->CR |= PRIORITY;                               \
                    if(TXINTERRUPT == 1)   DMA2_Stream1->CR |= DMA_SxCR_TCIE;   \
                    if(TXINTERRUPT == 0.5) DMA2_Stream1->CR |= DMA_SxCR_HTIE;   \
                    if(TXINTERRUPT == 2)   DMA2_Stream1->CR |= DMA_SxCR_TEIE;   \
                    DMA2_Stream1->CR |= DMA_SxCR_EN;                            }
#elif defined(STM32F401xx)

        /*!
        *   @brief DMAConnectTOADC(NumbData,PRIORITY, MEMORY, TXINTERRUPT) -> Connect DMA to ADC
        *       @arg NumbData - Number of transferred data
        *       @arg PRIORITY - Priority of target channel
        *       @arg MEMORY - Buffer address for storing values
        *       @arg TXINTERRUPT - Interrupt selection mode: 0.5 - half transferred interrupt
        *                                                    1 - transferred complete interrupt
        *                                                    2 - transferred error interrupt
        *       @version STM32F401xx
        */
    #define DMAConnectTOADC(PRIORITY, MEMORY, TXINTERRUPT)                     {\
                    DMA2_Stream0->CR |= (0 << 25);                              \
                    DMA2_Stream0->PAR |= ((uint32_t)&ADC1->DR);                 \
                    DMA2_Stream0->M0AR |= ((uint32_t)&MEMORY);                  \
                    DMA2_Stream0->CR &= ~DMA_SxCR_DIR;                          \
                    DMA2_Stream0->NDTR = ADC1_NUMB;                             \
                    DMA2_Stream0->CR &= ~DMA_SxCR_PINC;                         \
                    DMA2_Stream0->CR |= DMA_SxCR_MINC|DMA_SxCR_CIRC;            \
                    DMA2_Stream0->CR |= DMA_SxCR_PSIZE_0;                       \
                    DMA2_Stream0->CR |= DMA_SxCR_MSIZE_0;                       \
                    DMA2_Stream0->CR |= PRIORITY;                               \
                    if(TXINTERRUPT == 1)   DMA2_Stream0->CR |= DMA_SxCR_TCIE;   \
                    if(TXINTERRUPT == 0.5)   DMA2_Stream0->CR |= DMA_SxCR_HTIE; \
                    if(TXINTERRUPT == 2)   DMA2_Stream0->CR |= DMA_SxCR_TEIE;   \
                    DMA2_Stream0->CR |= DMA_SxCR_EN;                            }

#endif /*STM32F401xx, STM32F40_41xxx*/

    #define DMAConnectTOUSART(PRIORITY, MEMORY, TXINTERRUPT)
#endif /*configUSE_DMA*/
